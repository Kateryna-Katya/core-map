{"version":3,"file":"main-Cr8kJnbW.js","sources":["../../src/main.js"],"sourcesContent":["/**\n * Core-Map.blog - Main Script 2026\n * Содержит: Neural Canvas, Form Logic, Mobile Menu, Cookies, Parallax\n */\n\ndocument.addEventListener('DOMContentLoaded', () => {\n\n  // === 1. ИНИЦИАЛИЗАЦИЯ ИКОНОК (LUCIDE) ===\n  if (typeof lucide !== 'undefined') {\n      lucide.createIcons();\n  }\n\n  // === 2. ХЕДЕР: ЭФФЕКТ ПРИ СКРОЛЛЕ ===\n  const header = document.querySelector('.header');\n  if (header) {\n      const handleScroll = () => {\n          header.classList.toggle('header--scrolled', window.scrollY > 50);\n      };\n      window.addEventListener('scroll', handleScroll);\n      handleScroll(); // Проверка при загрузке\n  }\n\n  // === 3. МОБИЛЬНОЕ МЕНЮ ===\n  const burger = document.getElementById('burger-menu');\n  const mobileMenu = document.getElementById('mobile-menu-overlay');\n\n  if (burger && mobileMenu) {\n      const toggleMenu = () => {\n          burger.classList.toggle('active');\n          mobileMenu.classList.toggle('active');\n          document.body.style.overflow = mobileMenu.classList.contains('active') ? 'hidden' : '';\n      };\n\n      burger.addEventListener('click', toggleMenu);\n\n      // Закрытие при клике на любую ссылку в меню\n      const mobileLinks = mobileMenu.querySelectorAll('a');\n      mobileLinks.forEach(link => {\n          link.addEventListener('click', () => {\n              if (mobileMenu.classList.contains('active')) toggleMenu();\n          });\n      });\n  }\n\n  // === 4. ЛОГИКА ФОРМЫ (КОНТАКТЫ) ===\n  const initForm = () => {\n      const form = document.getElementById('main-form');\n      if (!form) return; // Выходим, если формы нет на текущей странице\n\n      const phoneInput = document.getElementById('phone-input');\n      const captchaText = document.getElementById('captcha-question');\n      const captchaInput = document.getElementById('captcha-answer');\n      const successMsg = document.getElementById('form-success');\n      const submitBtn = form.querySelector('.form__submit');\n\n      // Валидация телефона (только цифры)\n      if (phoneInput) {\n          phoneInput.addEventListener('input', (e) => {\n              e.target.value = e.target.value.replace(/[^0-9]/g, '');\n          });\n      }\n\n      // Генерация капчи\n      const n1 = Math.floor(Math.random() * 10) + 1;\n      const n2 = Math.floor(Math.random() * 10) + 1;\n      const correctAnswer = n1 + n2;\n\n      if (captchaText) {\n          captchaText.textContent = `${n1} + ${n2} =`;\n      }\n\n      // Обработка отправки\n      form.addEventListener('submit', (e) => {\n          e.preventDefault();\n\n          // Проверка капчи\n          if (captchaInput) {\n              const userAnswer = parseInt(captchaInput.value);\n              if (userAnswer !== correctAnswer) {\n                  alert('Ошибка: Неверный ответ капчи. Попробуйте снова.');\n                  captchaInput.value = '';\n                  captchaInput.focus();\n                  return;\n              }\n          }\n\n          // Визуализация отправки\n          if (submitBtn) {\n              submitBtn.disabled = true;\n              const originalText = submitBtn.innerHTML;\n              submitBtn.innerHTML = '<span>Отправка...</span>';\n          }\n\n          // Имитация AJAX запроса\n          setTimeout(() => {\n              if (successMsg) {\n                  successMsg.classList.add('active');\n                  // Анимация успеха через GSAP (если подключен)\n                  if (typeof gsap !== 'undefined') {\n                      gsap.from(successMsg, {\n                          scale: 0.8,\n                          opacity: 0,\n                          duration: 0.6,\n                          ease: \"back.out(1.7)\"\n                      });\n                  }\n              }\n              form.reset();\n          }, 1500);\n      });\n  };\n\n  initForm();\n\n  // === 5. HERO CANVAS (NEURAL NETWORK ANIMATION) ===\n  const initHeroCanvas = () => {\n      const canvas = document.getElementById('neural-canvas');\n      if (!canvas) return;\n\n      const ctx = canvas.getContext('2d');\n      let width, height, particles;\n      const particleCount = 75;\n      const mouse = { x: -1000, y: -1000 };\n\n      const resize = () => {\n          width = canvas.width = window.innerWidth;\n          height = canvas.height = window.innerHeight;\n      };\n\n      window.addEventListener('resize', resize);\n      window.addEventListener('mousemove', e => {\n          mouse.x = e.clientX;\n          mouse.y = e.clientY;\n      });\n\n      resize();\n\n      class Particle {\n          constructor() {\n              this.x = Math.random() * width;\n              this.y = Math.random() * height;\n              this.vx = (Math.random() - 0.5) * 0.4;\n              this.vy = (Math.random() - 0.5) * 0.4;\n              this.radius = Math.random() * 1.5 + 1;\n          }\n          update() {\n              this.x += this.vx;\n              this.y += this.vy;\n\n              const dx = mouse.x - this.x;\n              const dy = mouse.y - this.y;\n              const dist = Math.sqrt(dx * dx + dy * dy);\n              if (dist < 150) {\n                  this.x += dx * 0.01;\n                  this.y += dy * 0.01;\n              }\n\n              if (this.x < 0 || this.x > width) this.vx *= -1;\n              if (this.y < 0 || this.y > height) this.vy *= -1;\n          }\n          draw() {\n              ctx.beginPath();\n              ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);\n              ctx.fillStyle = 'rgba(56, 189, 248, 0.4)';\n              ctx.fill();\n          }\n      }\n\n      particles = Array.from({ length: particleCount }, () => new Particle());\n\n      const animate = () => {\n          ctx.clearRect(0, 0, width, height);\n          particles.forEach((p, i) => {\n              p.update();\n              p.draw();\n              for (let j = i + 1; j < particles.length; j++) {\n                  const p2 = particles[j];\n                  const dx = p.x - p2.x;\n                  const dy = p.y - p2.y;\n                  const dist = Math.sqrt(dx * dx + dy * dy);\n                  if (dist < 120) {\n                      ctx.beginPath();\n                      ctx.strokeStyle = `rgba(56, 189, 248, ${0.15 * (1 - dist / 120)})`;\n                      ctx.lineWidth = 0.6;\n                      ctx.moveTo(p.x, p.y);\n                      ctx.lineTo(p2.x, p2.y);\n                      ctx.stroke();\n                  }\n              }\n          });\n          requestAnimationFrame(animate);\n      };\n      animate();\n  };\n\n  initHeroCanvas();\n\n  // === 6. PARALLAX ДЛЯ КАРТОЧЕК (GSAP) ===\n  if (typeof gsap !== 'undefined') {\n      window.addEventListener('mousemove', (e) => {\n          const cards = document.querySelectorAll('.innovations__card, .blog-card');\n          cards.forEach(card => {\n              const bg = card.querySelector('.morph-bg, .morph-frame');\n              if (bg) {\n                  const rect = card.getBoundingClientRect();\n                  const x = (e.clientX - rect.left - rect.width / 2) / 25;\n                  const y = (e.clientY - rect.top - rect.height / 2) / 25;\n                  gsap.to(bg, { x, y, duration: 1.2, ease: \"power2.out\" });\n              }\n          });\n      });\n  }\n\n  // === 7. COOKIE POPUP ===\n  const initCookies = () => {\n      const popup = document.getElementById('cookie-popup');\n      const acceptBtn = document.getElementById('cookie-accept');\n\n      if (popup && acceptBtn) {\n          if (!localStorage.getItem('core_map_cookies')) {\n              setTimeout(() => popup.classList.add('show'), 2500);\n          }\n\n          acceptBtn.addEventListener('click', () => {\n              localStorage.setItem('core_map_cookies', 'true');\n              popup.classList.remove('show');\n          });\n      }\n  };\n\n  initCookies();\n});"],"names":["header","handleScroll","burger","mobileMenu","toggleMenu","link","form","phoneInput","captchaText","captchaInput","successMsg","submitBtn","e","n1","n2","correctAnswer","canvas","ctx","width","height","particles","particleCount","mouse","resize","Particle","dx","dy","animate","p","i","j","p2","dist","card","bg","rect","x","y","popup","acceptBtn"],"mappings":"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"}